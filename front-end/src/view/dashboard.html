<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - SanaPay</title>
    <link rel="stylesheet" href="/front-end/src/css/style1.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>üí≥ SanaPay</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="active">üìä Dashboard</a>
                <a href="bills.html">üìù Factures</a>
                <a href="analytics.html">üìà Analytics</a>
                <a href="account.html">üë§ Profil</a>
            </nav>
            <div class="sidebar-footer">
                <button onclick="logout()" class="btn btn-outline btn-block">D√©connexion</button>
            </div>
        </aside>

        <main class="main-content">
            <header class="page-header">
                <h1>Dashboard</h1>
                <div class="user-info">
                    <span id="userName">Chargement...</span>
                </div>
            </header>

            <div class="dashboard-grid">
                <div class="card balance-card">
                    <h3>Solde Actuel</h3>
                    <div class="balance-amount" id="balance">0 MAD</div>
                    <div class="balance-actions">
                        <button onclick="openDepositModal()" class="btn btn-sm btn-outline">üí∞ D√©poser</button>
                        <button onclick="openWithdrawModal()" class="btn btn-sm btn-outline">üí∏ Retirer</button>
                    </div>
                </div>

                <div class="card stats-card">
                    <h4>D√©p√¥ts (ce mois)</h4>
                    <div class="stat-value" id="monthlyDeposits">0 MAD</div>
                </div>

                <div class="card stats-card">
                    <h4>Retraits (ce mois)</h4>
                    <div class="stat-value" id="monthlyWithdrawals">0 MAD</div>
                </div>

                <div class="card stats-card">
                    <h4>Transactions Totales</h4>
                    <div class="stat-value" id="totalTransactions">0</div>
                </div>
            </div>

            <div class="card">
                <h3>√âvolution du Solde</h3>
                <canvas id="balanceChart"></canvas>
            </div>

            <div class="card">
                <h3>Transactions R√©centes</h3>
                <div id="recentTransactions" class="transactions-list">
                    <p class="text-center loading">Chargement des transactions...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Deposit Modal -->
    <div id="depositModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('depositModal')">&times;</span>
            <h3>D√©poser de l'argent</h3>
            <form id="depositForm">
                <div class="form-group">
                    <label for="depositAmount">Montant (MAD)</label>
                    <input 
                        type="number" 
                        id="depositAmount" 
                        required 
                        min="10" 
                        max="50000" 
                        step="0.01"
                        placeholder="1000">
                    <small>Min: 10 MAD - Max: 50,000 MAD</small>
                </div>
                <div class="form-group">
                    <label for="depositDescription">Description (optionnel)</label>
                    <input 
                        type="text" 
                        id="depositDescription" 
                        maxlength="500"
                        placeholder="Ex: Salaire mensuel">
                </div>
                <button type="submit" class="btn btn-primary btn-block">Confirmer le d√©p√¥t</button>
            </form>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div id="withdrawModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('withdrawModal')">&times;</span>
            <h3>Retirer de l'argent</h3>
            <form id="withdrawForm">
                <div class="form-group">
                    <label for="withdrawAmount">Montant (MAD)</label>
                    <input 
                        type="number" 
                        id="withdrawAmount" 
                        required 
                        min="10" 
                        max="10000" 
                        step="0.01"
                        placeholder="500">
                    <small>Min: 10 MAD - Max: 10,000 MAD</small>
                </div>
                <div class="form-group">
                    <label for="withdrawDescription">Description (optionnel)</label>
                    <input 
                        type="text" 
                        id="withdrawDescription" 
                        maxlength="500"
                        placeholder="Ex: Retrait ATM">
                </div>
                <button type="submit" class="btn btn-primary btn-block">Confirmer le retrait</button>
            </form>
        </div>
    </div>

    <script src="../js/api.js"></script>
    <script src="../js/dashboard.js"></script>
</body>
</html>
